<?
/**
*Class DB PostgreSQL - P.W.S.M.
*db lib for p.w.s.m work
*Author Roman Shneer romanshneer@gmail.com
*1.02.2012
*Any changes at your risk and criminal responsibility
*/
/*############ database basic interface ####################*/
eval(base64_decode('Q2xhc3MgREINCnsNCiAgICAgICAgdmFyICRjb25uOw0KICAgICAgICBmdW5jdGlvbiBEQigkZGJfaG9zdCwkZGJfbmFtZSwkZGJfdXNlciwkZGJfcGFzcykNCiAgICAgICAgew0KICAgICAgICAkZGJzdHJpbmc9Imhvc3Q9Ii4kZGJfaG9zdC4iIHBvcnQ9NTQzMiBkYm5hbWU9Ii4kZGJfbmFtZS4iIHVzZXI9Ii4kZGJfdXNlci4iIHBhc3N3b3JkPSIuJGRiX3Bhc3M7DQogICAgICAgIA0KICAgICAgICBpZighJHRoaXMtPmNvbm4gPSBAcGdfY29ubmVjdCgkZGJzdHJpbmcpKQ0KICAgICAgICB7DQogICAgICAgIGRpZSgiPGRpdiBzdHlsZT0nY29sb3I6cmVkJz5JbXBvcnN0YWJsZSBjb25uZWN0IHRvIGRiIHNlcnZlciAiLiRkYl9ob3N0LiIgZGJuYW1lICIuJGRiX25hbWUuIjwvZGl2PiIpOw0KICAgICAgICBleGl0KCk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gcmVkaXJlY3QoJGYpDQogICAgICAgIHsNCiAgICAgICAgaGVhZGVyKCJMb2NhdGlvbjoiLiRmKTsNCiAgICAgICAgZXhpdCgpOw0KICAgICAgICB9DQogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgICAgIGZ1bmN0aW9uIFFVRVJZKCRzcWwpDQogICAgICAgIHsNCiAgICAgICAgICNwcmludCAkc3FsLiJcbiI7DQoNCiAgICAgICAgJHJlc3VsdD1wZ19xdWVyeSgkc3FsKTsNCiAgICAgICAgI3ByaW50ICRyZXN1bHQuIjxocj4iOw0KICAgICAgICBpZigkcmVzdWx0KXJldHVybiAkcmVzdWx0Ow0KICAgICAgICBlbHNlICR0aGlzLT5sb2dfZGJfZXJyb3IoJHNxbCxwZ19sYXN0X2Vycm9yKCR0aGlzLT5jb25uKSk7DQogICAgICAgIH0NCiAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAgICAgZnVuY3Rpb24gTElTVF9RKCRzcWwpDQogICAgICAgIHsNCiAgICAgICAgI3ByaW50ICRzcWwuIjxocj4iOw0KICAgICAgICAkcmVzdWx0PSR0aGlzLT5RVUVSWSgkc3FsKTsNCg0KICAgICAgICBpZihwZ19udW1fcm93cygkcmVzdWx0KT09MClyZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgd2hpbGUoJHJvdz1wZ19mZXRjaF9hc3NvYygkcmVzdWx0KSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgJGRhdGFbXT0kcm93Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJGRhdGE7DQogICAgICAgIH0NCiAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgICAgIGZ1bmN0aW9uIFJPV19RKCRzcWwpDQogICAgICAgIHsNCiAgICAgICAgJHJlc3VsdD0kdGhpcy0+UVVFUlkoJHNxbCk7DQogICAgICAgIGlmKEBwZ19udW1fcm93cygkcmVzdWx0KT09MClyZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgcmV0dXJuIHBnX2ZldGNoX2Fzc29jKCRyZXN1bHQpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIFEoJHNxbCwkc3RyPWZhbHNlKQ0KICAgICAgICB7DQogICAgICAgIGlmKCgkc3RyPT1mYWxzZSkmJighaXNfaW50ZWdlcigkc3FsKSkpDQoJCXsNCgkJCSR2YWx1ZT0tMTsNCgkJfQ0KICAgICAgICByZXR1cm4gcGdfZXNjYXBlX3N0cmluZygkc3FsKTsNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBsb2dfZGJfZXJyb3IoJHNxbCwkbWVzc2FnZSkNCiAgICAgICAgew0KICAgICAgICBwcmludCAiPGRpdiBzdHlsZT0nYm9yZGVyOnNvbGlkIGJsYWNrIDFweDsnPjxkaXYgc3R5bGU9J2JvcmRlcjpzb2xpZCBibHVlIDFweDsnPiIuJHNxbC4iPC9kaXY+PGRpdiBzdHlsZT0nYm9yZGVyOnNvbGlkIHJlZCAxcHg7Jz4iLiRtZXNzYWdlLiI8L2Rpdj48ZGl2IHN0eWxlPSdib3JkZXI6c29saWQgZ3JlZW4gMXB4Oyc+Ii5kYXRlKCJoOmkgZC1tLXkiKS4iPC9kaXY+PC9kaXY+PGJyPjxicj5cbiI7DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gTlVNX1JPV1MoJHJlc3VsdCkNCiAgICAgICAgew0KICAgICAgICAJcmV0dXJuIHBnX251bV9yb3dzKCRyZXN1bHQpOw0KICAgICAgICB9DQp9'));
?>