<?
/**
*Class DB MYSQL - P.W.S.M.
*db lib for p.w.s.m work
*Author Roman Shneer romanshneer@gmail.com
*1.02.2012
*Any changes at your risk and criminal responsibility
*/
/*############ database basic interface ####################*/
eval(base64_decode('Q2xhc3MgREINCnsNCiAgICAgICAgdmFyICRjb25uOw0KICAgICAgICBmdW5jdGlvbiBEQigkZGJfaG9zdCwkZGJfbmFtZSwkZGJfdXNlciwkZGJfcGFzcykNCiAgICAgICAgew0KICAgICAgICAgICANCiAgICAgICAgaWYoISR0aGlzLT5jb25uID0gQG15c3FsX2Nvbm5lY3QoJGRiX2hvc3QsJGRiX3VzZXIsJGRiX3Bhc3MpKQ0KICAgICAgICB7DQogICAgICAgIGRpZSgiPGRpdiBzdHlsZT0nY29sb3I6cmVkJz5JbXBvcnN0YWJsZSBjb25uZWN0IHRvIGRiIHNlcnZlciAiLiRkYl9ob3N0LiIgZGJuYW1lICIuJGRiX25hbWUuIjwvZGl2PiIpOw0KICAgICAgICBleGl0KCk7DQogICAgICAgIH0NCiAgICAgICAgJHJlemRiPW15c3FsX3NlbGVjdF9kYigkZGJfbmFtZSwkdGhpcy0+Y29ubik7DQogICAgCWlmKCRyZXpkYj09ZmFsc2UpZGllKCI8Y2VudGVyPjxoMSBzdHlsZT0nY29sb3I6cmVkJz5EYXRhYmFzZSBub3QgY3JlYXRlZCEhPC9oMT48L2NlbnRlcj4iKTsNCgkJI2RpZSgkcmV6ZGIuIjxocj4iKTsNCiAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlZGlyZWN0KCRmKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBoZWFkZXIoIkxvY2F0aW9uOiIuJGYpOw0KICAgICAgICAgICAgICAgIGV4aXQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgICAgIGZ1bmN0aW9uIFFVRVJZKCRzcWwpDQogICAgICAgIHsNCiAgICAgICAgICNwcmludCAkc3FsLiJcbiI7DQoNCiAgICAgICAgJHJlc3VsdD1teXNxbF9xdWVyeSgkc3FsLCR0aGlzLT5jb25uKTsNCiAgICAgICAgI3ByaW50ICRyZXN1bHQuIjxocj4iOw0KICAgICAgICBpZigkcmVzdWx0KXJldHVybiAkcmVzdWx0Ow0KICAgICAgICBlbHNlICR0aGlzLT5sb2dfZGJfZXJyb3IoJHNxbCxteXNxbF9lcnJvcigkdGhpcy0+Y29ubikpOw0KICAgICAgICB9DQogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgICAgIGZ1bmN0aW9uIExJU1RfUSgkc3FsKQ0KICAgICAgICB7DQogICAgICAgICNwcmludCAkc3FsLiI8aHI+IjsNCiAgICAgICAgJHJlc3VsdD0kdGhpcy0+UVVFUlkoJHNxbCk7DQoNCiAgICAgICAgaWYobXlzcWxfbnVtX3Jvd3MoJHJlc3VsdCk9PTApcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIHdoaWxlKCRyb3c9bXlzcWxfZmV0Y2hfYXNzb2MoJHJlc3VsdCkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICRkYXRhW109JHJvdzsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRkYXRhOw0KICAgICAgICB9DQogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICAgICBmdW5jdGlvbiBST1dfUSgkc3FsKQ0KICAgICAgICB7DQogICAgICAgICRyZXN1bHQ9JHRoaXMtPlFVRVJZKCRzcWwpOw0KICAgICAgICBpZihAbXlzcWxfbnVtX3Jvd3MoJHJlc3VsdCk9PTApcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIHJldHVybiBteXNxbF9mZXRjaF9hc3NvYygkcmVzdWx0KTsNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBRKCRzcWwsJHN0cj1mYWxzZSkNCiAgICAgICAgew0KICAgICAgICBpZigoJHN0cj09ZmFsc2UpJiYoIWlzX2ludGVnZXIoJHNxbCkpKQ0KCQl7DQoJCQkkdmFsdWU9LTE7DQoJCX0NCiAgICAgICAgcmV0dXJuIG15c3FsX2VzY2FwZV9zdHJpbmcoJHNxbCk7DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbG9nX2RiX2Vycm9yKCRzcWwsJG1lc3NhZ2UpDQogICAgICAgIHsNCiAgICAgICAgcHJpbnQgIjxkaXYgc3R5bGU9J2JvcmRlcjpzb2xpZCBibGFjayAxcHg7Jz48ZGl2IHN0eWxlPSdib3JkZXI6c29saWQgYmx1ZSAxcHg7Jz4iLiRzcWwuIjwvZGl2PjxkaXYgc3R5bGU9J2JvcmRlcjpzb2xpZCByZWQgMXB4Oyc+Ii4kbWVzc2FnZS4iPC9kaXY+PGRpdiBzdHlsZT0nYm9yZGVyOnNvbGlkIGdyZWVuIDFweDsnPiIuZGF0ZSgiaDppIGQtbS15IikuIjwvZGl2PjwvZGl2Pjxicj48YnI+XG4iOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIE5VTV9ST1dTKCRyZXN1bHQpDQogICAgICAgIHsNCiAgICAgICAgCXJldHVybiBteXNxbF9udW1fcm93cygkcmVzdWx0KTsNCiAgICAgICAgfQ0KfQ=='));
?>